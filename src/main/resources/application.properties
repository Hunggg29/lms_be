spring.application.name=lms

# SERVER CONFIGURATION
server.port=8080
server.error.include-message=always
server.error.include-binding-errors=always

# DATABASE CONFIGURATION
spring.datasource.url=jdbc:postgresql://dpg-d5a787h5pdvs73apl240-a.singapore-postgres.render.com:5432/lmsnova_database?sslmode=require
spring.datasource.username=lmsnova_database_user
spring.datasource.password=08ym6JmQ8q5pHKaFasWOcgekgNOa46Io
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Hikari Connection Pool
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# HIBERNATE CONFIGURATION
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
## Removed SQLServerDialect, only PostgreSQLDialect is used
spring.jpa.properties.hibernate.bytecode.provider=none
spring.jpa.open-in-view=false
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl

# ===== LIQUIBASE =====
spring.liquibase.enabled=false
# spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# ===== OAUTH2 CONFIGURATION - Google Login =====

spring.security.oauth2.client.registration.google.client-id=38181758591-763lis5t7l7fd35m0uli7v8bpi8ca89f.apps.googleusercontent.com
spring.security.oauth2.client.registration.google.client-secret=not-needed-for-id-token-flow
spring.security.oauth2.client.registration.google.scope=email,profile
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

# ===== MAIL CONFIGURATION - Gmail =====
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=hieu.dhm172808@gmail.com
spring.mail.password=iswtcqbvcnatzywq
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# ===== FILE UPLOAD =====
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB

# ===== GRAPHQL =====
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.path=/graphiql

# ===== ACTUATOR =====
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===== LOGGING =====
logging.level.root=INFO
logging.level.com.seikyuuressha.lms=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ===== JWT CONFIGURATION =====
jwt.secret=$*NNyW_N7.Kbxc5f@yH0i=cHiS7WgY+F)*ngXY-!BVtoy)jpLdCFSjt^hA;qX)DFP2GHjP|4xuOmL:*MB{(2>f@l+4-F;q5i7/-xm%k}wrRK3A;f9i>m|wV=MNr>UaAVlUl:@_JZnVTWJ*@Tulas^OIwR7o.gnwf!CLchlGV^5-}Gj(c0YPK]hnE8Mp@0R>w#d!bm)*^U-h!lveQJ7W|B49]Ewd.{5y1rWu@1PvwV6:8!tR)0/|MvWHtu#Lk=>hW
jwt.expiration=86400000
jwt.refresh-expiration=604800000
security.pepper=9a0b1c2d3f4e5g6h7i8j9k0l1m2n3o4p5

# ===== CORS =====
app.cors.allowed-origins=https://lmsplatform.site

# ===== FILE STORAGE =====
app.file-storage.upload-dir=./uploads

# ===== VNPAY CONFIGURATION =====
vnpay.tmnCode=N22H40GJ
vnpay.hashSecret=5RXBFFJIPXSVYZQQ3X93WON4XUYRIMQR
vnpay.payUrl=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.returnUrl=http://localhost:5173/payment/callback
vnpay.version=2.1.0
vnpay.command=pay
vnpay.orderType=other

# ===== CERTIFICATE STORAGE =====
certificate.storage-path=./uploads/certificates
certificate.base-url=http://localhost:8080/certificates

# ===== AWS S3 CONFIGURATION =====
aws.s3.access-key=${AWS_ACCESS_KEY_ID:your-aws-access-key}
aws.s3.secret-key=${AWS_SECRET_ACCESS_KEY:your-aws-secret-key}
aws.s3.region=${AWS_REGION:ap-southeast-1}
aws.s3.bucket-name=${AWS_S3_BUCKET:lms-video-storage}
aws.s3.cloudfront-domain=${AWS_CLOUDFRONT_DOMAIN:}
aws.s3.presigned-url-expiration=3600
